<Window x:Class="GhostLink.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="GhostLink" Height="600" Width="900"
        Background="#1E1E1E"
        FontFamily="Consolas"
        Foreground="#E0E0E0">

    <DockPanel>
        <!-- STATUS BAR -->
        <StatusBar DockPanel.Dock="Bottom" Background="#2D2D30" Foreground="LightGray">
            <TextBlock x:Name="StatusText" Text="GhostLink ready." Padding="5"/>
        </StatusBar>

        <!-- MAIN GRID -->
        <Grid Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- LEFT PANEL -->
            <Grid Grid.Column="0" Margin="0,0,10,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Peers Online:" FontWeight="Bold" FontSize="14"
                           Foreground="#00FFFF" Margin="5"/>

                <!-- Discovery -->
                <Grid Grid.Row="1" Margin="5,0,5,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Button Content="Search Peers" Grid.Column="1"
                            Background="#007ACC" Foreground="White"
                            BorderBrush="#007ACC" Padding="5,2"
                            Click="BroadcastDiscovery_Click"/>
                </Grid>

                <ListBox x:Name="PeerListBox" Grid.Row="2" Margin="5"
                         Background="#2D2D30" BorderBrush="#3A3A3A" />

                <!-- Selected Peer Info -->
                <StackPanel Grid.Row="3" Margin="5" Background="#2D2D30">
                    <TextBlock Text="Selected Peer:" FontWeight="Bold" Margin="0 0 0 5"/>
                    <TextBlock x:Name="SelectedPeerText" Text="(none)" Margin="0 0 0 5"/>
                    <Button Content="Start Chat"
                            Background="#007ACC" Foreground="White"
                            Click="StartChatWithSelectedPeer"/>
                </StackPanel>
            </Grid>

            <!-- RIGHT PANEL -->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Nickname and Connection Settings in One Line -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Nickname Section -->
                    <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,10,20,0">
                        <TextBlock Text="Nickname" Foreground="Gray" Margin="2,0,0,2" FontSize="12"/>
                        <TextBox x:Name="UsernameTextBox" Width="150" Text="Anon"
                 Background="#2D2D30" Foreground="White"
                 BorderBrush="#3A3A3A" Padding="4"/>
                    </StackPanel>

                    <!-- Divider (Optional Visual Cue) -->
                    <!-- Add a vertical line if desired -->
                    <Rectangle Grid.Column="1" Width="1" Fill="#444" Margin="5,0"/>

                    <!-- Connection Section -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Bottom">
                        <TextBox x:Name="IpTextBox" Width="160" Text="127.0.0.1"
                 Background="#2D2D30" Foreground="White"
                 BorderBrush="#3A3A3A" Padding="4" Margin="0,0,10,0"/>
                        <Button Content="Connect" Width="80"
                Background="#007ACC" Foreground="White"
                BorderBrush="#007ACC" Padding="5,2"/>
                    </StackPanel>
                </Grid>


                <!-- Chat Messages (Header + History) -->
                <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto" Background="#1E1E1E">
                    <StackPanel x:Name="ChatPanel" Margin="0 0 0 10">
                        <!-- Header for chat exchange -->
                        <Border Background="#333333" Padding="5">
                            <TextBlock x:Name="ChatHeader" Text="Chat with: (none)"
                                       Foreground="#00FFFF" FontWeight="Bold" FontSize="14"
                                       VerticalAlignment="Center"/>
                        </Border>
                        <!-- Chat messages will go here -->
                    </StackPanel>
                </ScrollViewer>

                <!-- Message Input -->
                <Grid Grid.Row="3" Margin="0 5 0 5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="InputBox" Height="30" Margin="0 0 10 0" Grid.Column="0"
                             Background="#2D2D30" Foreground="White"
                             BorderBrush="#3A3A3A"
                             KeyDown="InputBox_KeyDown"/>
                    <Button Content="Send" Width="80"
                            Background="#0E639C" Foreground="White" Grid.Column="1"
                            BorderBrush="#0E639C"
                            Click="Send_Click"/>
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
